<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Agente IA - Gantt Din√°mico (Fase 3-9)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0a0a;
            color: #e4e6eb;
            overflow-x: auto;
        }

        .header {
            background: #00d9ff;
            padding: 30px 40px;
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.4);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .controls {
            background: #111111;
            padding: 20px 40px;
            display: flex;
            gap: 15px;
            align-items: center;
            border-bottom: 2px solid #1a1a1a;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #00d9ff 0%, #a855f7 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn:hover {
            background: linear-gradient(135deg, #00b8d9 0%, #8b3fd7 100%);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #00d9ff;
        }

        .btn-secondary:hover {
            background: #00b8d9;
        }

        .btn-danger {
            background: #a855f7;
        }

        .btn-danger:hover {
            background: #8b3fd7;
        }

        .toolbar {
            background: #111111;
            padding: 15px 40px;
            display: flex;
            gap: 20px;
            align-items: center;
            border-bottom: 1px solid #1a1a1a;
            flex-wrap: wrap;
        }

        .toolbar-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #1a1a1a;
            border-radius: 6px;
            font-size: 13px;
        }

        .gantt-container {
            display: flex;
            min-width: 1400px;
        }

        .task-list {
            width: 550px;
            background: #111111;
            border-right: 2px solid #1a1a1a;
        }

        .task-list-header {
            display: grid;
            grid-template-columns: 50px 180px 90px 80px 120px;
            background: #1a1a1a;
            padding: 12px 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #00d9ff;
            border-bottom: 2px solid #00d9ff;
            position: sticky;
            top: 0;
            z-index: 20;
        }

        .task-row {
            display: grid;
            grid-template-columns: 50px 180px 90px 80px 120px;
            padding: 14px 20px;
            border-bottom: 1px solid #2d3142;
            font-size: 13px;
            transition: background 0.2s;
        }

        .task-row:hover {
            background: #1a1a1a;
        }

        .task-row.phase {
            background: #1a1a1a;
            font-weight: 600;
            border-bottom: 2px solid #00d9ff;
        }

        .task-row.milestone {
            background: #1a1a1a;
            font-style: italic;
            border-left: 4px solid #a855f7;
        }

        .task-name {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .task-indent {
            margin-left: 20px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .status-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .status-pending {
            background: rgba(156, 163, 175, 0.2);
            color: #9ca3af;
            border: 1px solid #6b7280;
        }

        .status-progress {
            background: rgba(0, 217, 255, 0.2);
            color: #00d9ff;
            border: 1px solid #00d9ff;
        }

        .status-completed {
            background: rgba(168, 85, 247, 0.2);
            color: #a855f7;
            border: 1px solid #a855f7;
        }

        .timeline {
            flex: 1;
            background: #0a0a0a;
            overflow-x: auto;
        }

        .timeline-header {
            display: flex;
            background: #1a1a1a;
            border-bottom: 2px solid #00d9ff;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .month-header {
            padding: 12px;
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #00d9ff;
            border-right: 1px solid #1a1a1a;
            min-width: 200px;
        }

        .timeline-grid {
            position: relative;
        }

        .timeline-row {
            height: 48px;
            border-bottom: 1px solid #1a1a1a;
            position: relative;
        }

        .timeline-row.phase {
            background: rgba(26, 26, 26, 0.5);
            border-bottom: 2px solid #00d9ff;
        }

        .bar {
            position: absolute;
            height: 24px;
            top: 12px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            padding: 0 12px;
            font-size: 11px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            cursor: pointer;
        }

        .bar:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .bar-label {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Colores por fase - Gradientes ZCOD3 */
        .fase3 {
            background: linear-gradient(90deg, #00d9ff 0%, #00b8d9 100%);
        }

        .fase4 {
            background: linear-gradient(90deg, #00b8d9 0%, #0097b3 100%);
        }

        .fase5 {
            background: linear-gradient(90deg, #0097b3 0%, #7c3aed 100%);
        }

        .fase6 {
            background: linear-gradient(90deg, #7c3aed 0%, #a855f7 100%);
        }

        .fase7 {
            background: linear-gradient(90deg, #a855f7 0%, #c084fc 100%);
        }

        .fase8 {
            background: linear-gradient(90deg, #c084fc 0%, #a855f7 100%);
        }

        .fase9 {
            background: linear-gradient(90deg, #a855f7 0%, #00d9ff 100%);
            color: white;
        }

        .hito {
            background: linear-gradient(135deg, #00d9ff 0%, #a855f7 100%);
            color: white;
        }

        /* Estados en barras */
        .bar.completed {
            opacity: 0.6;
        }

        .bar.progress {
            background: linear-gradient(90deg, currentColor 0%, currentColor 50%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0.3) 100%);
            background-size: 20px 100%;
            animation: progress-animation 1s linear infinite;
        }

        @keyframes progress-animation {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 20px 0;
            }
        }

        .milestone-marker {
            width: 0;
            height: 0;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-top: 20px solid #a855f7;
            position: absolute;
            top: 14px;
            filter: drop-shadow(0 2px 8px rgba(168, 85, 247, 0.6));
        }

        .milestone-label {
            position: absolute;
            top: 36px;
            left: -40px;
            font-size: 10px;
            font-weight: 700;
            color: #a855f7;
            white-space: nowrap;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            padding: 30px 40px;
            background: #111111;
            border-bottom: 2px solid #1a1a1a;
        }

        .stat-card {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #00d9ff;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #00d9ff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 20px 40px;
            background: #111111;
            border-bottom: 2px solid #1a1a1a;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .footer {
            background: #111111;
            padding: 20px 40px;
            text-align: center;
            font-size: 12px;
            color: #9ca3af;
            border-top: 2px solid #1a1a1a;
        }

        .footer a {
            color: #00d9ff;
            text-decoration: none;
        }

        .footer a:hover {
            color: #a855f7;
            text-decoration: underline;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: linear-gradient(135deg, #00d9ff 0%, #a855f7 100%);
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 217, 255, 0.4);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 1200px) {
            .gantt-container {
                min-width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>ü§ñ Proyecto Agente IA - ISMM (Gantt Din√°mico)</h1>
        <p>Cronograma Interactivo | 20 Febrero - 09 Abril 2026 (Fases 1-7)</p>
    </div>

    <div class="controls">
        <button class="btn" onclick="loadFromCSV()">üìÇ Cargar desde CSV</button>
        <button class="btn btn-secondary" onclick="exportProgress()">üíæ Exportar Progreso</button>
        <button class="btn btn-danger" onclick="resetProgress()">üîÑ Resetear Todo</button>
        <button class="btn" onclick="manageTeam()">üë• Gestionar Equipo</button>
        <span style="margin-left: auto; font-size: 12px; color: #9ca3af;">
            üí° Haz clic en los badges de estado para cambiarlos
        </span>
    </div>

    <div class="stats">
        <div class="stat-card">
            <div class="stat-number">35</div>
            <div class="stat-label">D√≠as Laborables</div>
        </div>
        <div class="stat-card" style="border-left-color: #00d9ff;">
            <div class="stat-number" style="color: #00d9ff;">7</div>
            <div class="stat-label">Fases del Proyecto</div>
        </div>
        <div class="stat-card" style="border-left-color: #a855f7;">
            <div class="stat-number" style="color: #a855f7;" id="totalTasks">61</div>
            <div class="stat-label">Tareas Totales</div>
        </div>
        <div class="stat-card" style="border-left-color: #c084fc;">
            <div class="stat-number" style="color: #c084fc;">7</div>
            <div class="stat-label">Hitos (H1-H7)</div>
        </div>
        <div class="stat-card" style="border-left-color: #00d9ff;">
            <div class="stat-number" style="color: #00d9ff;" id="completedTasks">0</div>
            <div class="stat-label">Tareas Completadas</div>
        </div>
        <div class="stat-card" style="border-left-color: #a855f7;">
            <div class="stat-number" style="color: #a855f7;" id="progressPercent">0%</div>
            <div class="stat-label">Progreso General</div>
        </div>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-color fase3"></div><span>Fase 1: Meta API - WhatsApp</span>
        </div>
        <div class="legend-item">
            <div class="legend-color fase4"></div><span>Fase 2: Chatwoot</span>
        </div>
        <div class="legend-item">
            <div class="legend-color fase5"></div><span>Fase 3: Agente IA</span>
        </div>
        <div class="legend-item">
            <div class="legend-color fase6"></div><span>Fase 4: Zoho CRM</span>
        </div>
        <div class="legend-item">
            <div class="legend-color fase7"></div><span>Fase 5: Pruebas y QA</span>
        </div>
        <div class="legend-item">
            <div class="legend-color fase8"></div><span>Fase 6: Capacitaci√≥n</span>
        </div>
        <div class="legend-item">
            <div class="legend-color fase9"></div><span>Fase 7: Despliegue</span>
        </div>
        <div class="legend-item">
            <div class="legend-color hito"></div><span>üíé Hitos H1-H7</span>
        </div>
    </div>

    <div class="toolbar">
        <div class="toolbar-item">üìÖ Inicio: 20/02/2026</div>
        <div class="toolbar-item">üéØ Fin: 09/04/2026</div>
        <div class="toolbar-item">üë• Equipo: 2 personas</div>
        <div class="toolbar-item">‚è±Ô∏è 560 horas totales</div>
        <div class="toolbar-item" id="pendingCount">‚¨ú Pendiente: 61</div>
        <div class="toolbar-item" id="progressCount">üîÑ En progreso: 0</div>
        <div class="toolbar-item" id="completedCount">‚úÖ Completado: 0</div>
    </div>

    <div class="gantt-container">
        <div class="task-list">
            <div class="task-list-header">
                <div>WBS</div>
                <div>TAREA</div>
                <div>ESTADO</div>
                <div>DURACI√ìN</div>
                <div>RECURSOS</div>
            </div>
            <div id="taskList"></div>
        </div>
        <div class="timeline">
            <div class="timeline-header">
                <div class="month-header">FEBRERO 2026</div>
                <div class="month-header">MARZO 2026</div>
                <div class="month-header">ABRIL 2026</div>
            </div>
            <div class="timeline-grid" id="timelineGrid"></div>
        </div>
    </div>

    <div class="footer">
        <p>Proyecto Agente IA - ISMM | Desarrollado por Zcod3 | ¬© 2026 | <a
                href="https://github.com/PSG-ONE/proyecto-agente-ia-ismm">GitHub</a></p>
        <p style="margin-top: 8px; font-size: 11px;">Los cambios se guardan autom√°ticamente en tu navegador
            (localStorage)</p>
    </div>

    <script>
        // Datos de las tareas (WBS renumerado desde 1.0)
        let tasks = [
            // FASE 1 (antes Fase 3)
            { wbs: '1.0', name: 'FASE 1: INTEGRACI√ìN META API', duration: '7d', start: 0, length: 7, resource: 'Equipo', type: 'phase', class: 'fase3', status: 'pending' },
            { wbs: '1.1', name: 'Verificaci√≥n n√∫mero telef√≥nico', duration: '1d', start: 0, length: 1, resource: 'P1', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.2', name: 'Validaci√≥n portafolio empresarial', duration: '1d', start: 0, length: 1, resource: 'P2', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.3', name: 'Preparaci√≥n documentaci√≥n', duration: '1d', start: 1, length: 1, resource: 'P1', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.4', name: 'Env√≠o y seguimiento verificaci√≥n', duration: '2d', start: 4, length: 2, resource: 'P2', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.5', name: 'Creaci√≥n app Meta Developers', duration: '1d', start: 4, length: 1, resource: 'P1', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.6', name: 'Configuraci√≥n credenciales', duration: '1d', start: 5, length: 1, resource: 'P1', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.7', name: 'Configuraci√≥n webhooks', duration: '1d', start: 6, length: 1, resource: 'P2', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.8', name: 'Pruebas conexi√≥n WhatsApp API', duration: '1d', start: 6, length: 1, resource: 'Ambos', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: '1.9', name: 'Documentaci√≥n credenciales', duration: '0.5d', start: 7, length: 0.5, resource: 'P1', type: 'task', class: 'fase3', status: 'pending' },
            { wbs: 'H1', name: 'üíé H1: WhatsApp API Verificado', duration: '0d', start: 7, length: 0, resource: '', type: 'milestone', class: 'hito', status: 'pending' },

            // FASE 2 (antes Fase 4)
            { wbs: '2.0', name: 'FASE 2: CONFIGURACI√ìN CHATWOOT', duration: '5d', start: 9, length: 5, resource: 'Equipo', type: 'phase', class: 'fase4', status: 'pending' },
            { wbs: '2.1', name: 'Instalaci√≥n Chatwoot', duration: '1.5d', start: 9, length: 1.5, resource: 'P2', type: 'task', class: 'fase4', status: 'pending' },
            { wbs: '2.2', name: 'Configuraci√≥n inicial', duration: '0.5d', start: 9, length: 0.5, resource: 'P1', type: 'task', class: 'fase4', status: 'pending' },
            { wbs: '2.3', name: 'Integraci√≥n WhatsApp API', duration: '1d', start: 11, length: 1, resource: 'P1', type: 'task', class: 'fase4', status: 'pending' },
            { wbs: 'H2', name: 'üíé H2: Chatwoot Operativo', duration: '0d', start: 13, length: 0, resource: '', type: 'milestone', class: 'hito', status: 'pending' },

            // FASE 3 (antes Fase 5)
            { wbs: '3.0', name: 'FASE 3: DESARROLLO AGENTE IA', duration: '10d', start: 14, length: 10, resource: 'Equipo', type: 'phase', class: 'fase5', status: 'pending' },
            { wbs: '3.1', name: 'Evaluaci√≥n plataformas IA', duration: '1d', start: 14, length: 1, resource: 'Ambos', type: 'task', class: 'fase5', status: 'pending' },
            { wbs: 'H3', name: 'üíé H3: Agente IA Funcional', duration: '0d', start: 24, length: 0, resource: '', type: 'milestone', class: 'hito', status: 'pending' },

            // FASE 4 (antes Fase 6)
            { wbs: '4.0', name: 'FASE 4: INTEGRACI√ìN ZOHO CRM', duration: '5d', start: 25, length: 5, resource: 'Equipo', type: 'phase', class: 'fase6', status: 'pending' },
            { wbs: 'H4', name: 'üíé H4: Zoho CRM Integrado', duration: '0d', start: 29, length: 0, resource: '', type: 'milestone', class: 'hito', status: 'pending' },

            // FASE 5 (antes Fase 7)
            { wbs: '5.0', name: 'FASE 5: PRUEBAS Y QA', duration: '5d', start: 30, length: 5, resource: 'Equipo', type: 'phase', class: 'fase7', status: 'pending' },
            { wbs: 'H5', name: 'üíé H5: Sistema Validado', duration: '0d', start: 34, length: 0, resource: '', type: 'milestone', class: 'hito', status: 'pending' },

            // FASE 6 (antes Fase 8)
            { wbs: '6.0', name: 'FASE 6: CAPACITACI√ìN', duration: '3d', start: 35, length: 3, resource: 'Equipo', type: 'phase', class: 'fase8', status: 'pending' },
            { wbs: 'H6', name: 'üíé H6: Equipo Capacitado', duration: '0d', start: 37, length: 0, resource: '', type: 'milestone', class: 'hito', status: 'pending' },

            // FASE 7 (antes Fase 9)
            { wbs: '7.0', name: 'FASE 7: DESPLIEGUE', duration: '2d', start: 37, length: 2, resource: 'Equipo', type: 'phase', class: 'fase9', status: 'pending' },
            { wbs: 'H7', name: 'üíé H7: GO-LIVE PRODUCCI√ìN', duration: '0d', start: 38, length: 0, resource: '', type: 'milestone', class: 'hito', status: 'pending' }
        ];

        // Gesti√≥n de equipo
        let teamMembers = [
            { id: 'P1', name: 'Persona 1', role: 'Desarrollador' },
            { id: 'P2', name: 'Persona 2', role: 'Desarrollador' },
            { id: 'Ambos', name: 'Equipo Completo', role: 'Equipo' }
        ];

        // Cargar estado guardado
        function loadSavedState() {
            const saved = localStorage.getItem('gantt_tasks');
            if (saved) {
                const savedTasks = JSON.parse(saved);
                tasks.forEach((task, index) => {
                    if (savedTasks[index] && savedTasks[index].wbs === task.wbs) {
                        task.status = savedTasks[index].status;
                    }
                });
            }
        }

        // Guardar estado
        function saveState() {
            localStorage.setItem('gantt_tasks', JSON.stringify(tasks));
        }

        // Cambiar estado de tarea
        function toggleStatus(index) {
            const statusCycle = ['pending', 'progress', 'completed'];
            const currentIndex = statusCycle.indexOf(tasks[index].status);
            const nextIndex = (currentIndex + 1) % statusCycle.length;
            tasks[index].status = statusCycle[nextIndex];

            saveState();
            renderGantt();
            showNotification('Estado actualizado');
        }

        // Obtener badge de estado
        function getStatusBadge(status, index) {
            const badges = {
                'pending': `<span class="status-badge status-pending" onclick="toggleStatus(${index})">‚¨ú Pendiente</span>`,
                'progress': `<span class="status-badge status-progress" onclick="toggleStatus(${index})">üîÑ En progreso</span>`,
                'completed': `<span class="status-badge status-completed" onclick="toggleStatus(${index})">‚úÖ Completado</span>`
            };
            return badges[status] || badges['pending'];
        }

        // Calcular estad√≠sticas
        function updateStats() {
            const total = tasks.filter(t => t.type === 'task' || t.type === 'milestone').length;
            const completed = tasks.filter(t => (t.type === 'task' || t.type === 'milestone') && t.status === 'completed').length;
            const inProgress = tasks.filter(t => (t.type === 'task' || t.type === 'milestone') && t.status === 'progress').length;
            const pending = total - completed - inProgress;
            const percent = Math.round((completed / total) * 100);

            document.getElementById('totalTasks').textContent = total;
            document.getElementById('completedTasks').textContent = completed;
            document.getElementById('progressPercent').textContent = percent + '%';
            document.getElementById('pendingCount').textContent = `‚¨ú Pendiente: ${pending}`;
            document.getElementById('progressCount').textContent = `üîÑ En progreso: ${inProgress}`;
            document.getElementById('completedCount').textContent = `‚úÖ Completado: ${completed}`;
        }

        // Renderizar Gantt
        function renderGantt() {
            const taskList = document.getElementById('taskList');
            const timelineGrid = document.getElementById('timelineGrid');

            taskList.innerHTML = '';
            timelineGrid.innerHTML = '';

            tasks.forEach((task, index) => {
                // Task list row
                const row = document.createElement('div');
                row.className = `task-row ${task.type}`;
                row.innerHTML = `
                    <div>${task.wbs}</div>
                    <div class="task-name ${task.type === 'task' ? 'task-indent' : ''}">${task.name}</div>
                    <div>${getStatusBadge(task.status, index)}</div>
                    <div>${task.duration}</div>
                    <div>${task.resource}</div>
                `;
                taskList.appendChild(row);

                // Timeline row
                const timelineRow = document.createElement('div');
                timelineRow.className = `timeline-row ${task.type}`;

                if (task.type === 'milestone') {
                    const marker = document.createElement('div');
                    marker.className = 'milestone-marker';
                    marker.style.left = `${task.start * 15}px`;
                    marker.title = task.name;

                    const label = document.createElement('div');
                    label.className = 'milestone-label';
                    label.textContent = task.wbs;
                    label.style.left = `${task.start * 15}px`;

                    timelineRow.appendChild(marker);
                    timelineRow.appendChild(label);
                } else if (task.length > 0) {
                    const bar = document.createElement('div');
                    bar.className = `bar ${task.class} ${task.status}`;
                    bar.style.left = `${task.start * 15}px`;
                    bar.style.width = `${task.length * 15}px`;
                    bar.innerHTML = `<div class="bar-label">${task.name}</div>`;
                    bar.title = `${task.name}\nDuraci√≥n: ${task.duration}\nRecursos: ${task.resource}\nEstado: ${task.status}`;
                    bar.onclick = () => toggleStatus(index);
                    timelineRow.appendChild(bar);
                }

                timelineGrid.appendChild(timelineRow);
            });

            updateStats();
        }

        // Mostrar notificaci√≥n
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // Exportar progreso
        function exportProgress() {
            const data = tasks.map(t => ({
                wbs: t.wbs,
                name: t.name,
                status: t.status
            }));

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'gantt_progress.json';
            a.click();

            showNotification('Progreso exportado');
        }

        // Resetear progreso
        function resetProgress() {
            if (confirm('¬øEst√°s seguro de que quieres resetear todo el progreso?')) {
                tasks.forEach(task => task.status = 'pending');
                saveState();
                renderGantt();
                showNotification('Progreso reseteado');
            }
        }

        // Cargar desde CSV (placeholder)
        function loadFromCSV() {
            showNotification('Funci√≥n en desarrollo - Por ahora usa el CSV manualmente');
        }

        // Gestionar equipo
        function manageTeam() {
            const teamList = teamMembers.map(m => `${m.id}: ${m.name} (${m.role})`).join('\n');
            const newMember = prompt(`EQUIPO ACTUAL:\n${teamList}\n\nAgregar nueva persona (formato: ID,Nombre,Rol):\nEjemplo: P3,Juan P√©rez,QA Tester`);

            if (newMember) {
                const parts = newMember.split(',').map(p => p.trim());
                if (parts.length === 3) {
                    teamMembers.push({ id: parts[0], name: parts[1], role: parts[2] });
                    localStorage.setItem('gantt_team', JSON.stringify(teamMembers));
                    showNotification(`‚úÖ ${parts[1]} agregado al equipo`);
                } else {
                    showNotification('‚ùå Formato incorrecto. Usa: ID,Nombre,Rol');
                }
            }
        }

        // Cargar equipo guardado
        function loadTeam() {
            const saved = localStorage.getItem('gantt_team');
            if (saved) {
                teamMembers = JSON.parse(saved);
            }
        }

        // Inicializar
        loadTeam();
        loadSavedState();
        renderGantt();
    </script>
</body>

</html>